export const meses = [
  "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
  "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
];

export const anios = ["2023", "2024", "2025","2026"];
export const anioInicio = anios[0];
export const anioFin = anios[anios.length - 1];

export const accionistasReales = [
  {
    "id": 1,
    "nombre": "Paola López Pérez",
    "telefono": "+593 921588399",
    "email": "paola.lópez.pérez@aneupi.com",
    "codigo": "ANE-0001",
    "fechaIngreso": "2020-09-07",
    "direccion": "Av. Amazonas 1341, Cuenca",
    "tipoAccionista": "Accionista Minoritario",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2020-11-05 00:00:00",
    "multaBase": 22806
  },
  {
    "id": 2,
    "nombre": "Ricardo Pérez López",
    "telefono": "+593 935116281",
    "email": "ricardo.pérez.lópez@aneupi.com",
    "codigo": "ANE-0002",
    "fechaIngreso": "2022-07-08",
    "direccion": "Av. Amazonas 272, Cuenca",
    "tipoAccionista": "Fundador",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2024-01-18 00:00:00",
    "multaBase": 18109
  },
  {
    "id": 3,
    "nombre": "Miguel Gómez Martínez",
    "telefono": "+593 965485657",
    "email": "miguel.gómez.martínez@aneupi.com",
    "codigo": "ANE-0003",
    "fechaIngreso": "2022-03-12",
    "direccion": "Av. Insurgentes 1374, Monterrey",
    "tipoAccionista": "Fundador",
    "estado": "Suspendido",
    "notificacionesActivas": false,
    "ultimoAcceso": "2024-10-10 00:00:00",
    "multaBase": 4602
  },
  {
    "id": 4,
    "nombre": "Ricardo Mendoza Rodríguez",
    "telefono": "+593 958458722",
    "email": "ricardo.mendoza.rodríguez@aneupi.com",
    "codigo": "ANE-0004",
    "fechaIngreso": "2019-12-16",
    "direccion": "Av. Colón 737, Monterrey",
    "tipoAccionista": "Fundador",
    "estado": "Suspendido",
    "notificacionesActivas": false,
    "ultimoAcceso": "2023-12-10 00:00:00",
    "multaBase": 1318
  },
  {
    "id": 5,
    "nombre": "Patricia Mendoza Sánchez",
    "telefono": "+593 998506831",
    "email": "patricia.mendoza.sánchez@aneupi.com",
    "codigo": "ANE-0005",
    "fechaIngreso": "2022-05-26",
    "direccion": "Av. Insurgentes 1044, Guayaquil",
    "tipoAccionista": "Inversionista",
    "estado": "Suspendido",
    "notificacionesActivas": true,
    "ultimoAcceso": "2022-12-22 00:00:00",
    "multaBase": 5601
  },
  {
    "id": 6,
    "nombre": "Andrés García Martínez",
    "telefono": "+593 986042506",
    "email": "andrés.garcía.martínez@aneupi.com",
    "codigo": "ANE-0006",
    "fechaIngreso": "2020-01-15",
    "direccion": "Av. Naciones Unidas 1315, Cuenca",
    "tipoAccionista": "Inversionista",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2020-06-18 00:00:00",
    "multaBase": 3504
  },
  {
    "id": 7,
    "nombre": "Lucía Mendoza Gómez",
    "telefono": "+593 943128432",
    "email": "lucía.mendoza.gómez@aneupi.com",
    "codigo": "ANE-0007",
    "fechaIngreso": "2024-08-22",
    "direccion": "Av. Colón 1491, Monterrey",
    "tipoAccionista": "Fundador",
    "estado": "Inactivo",
    "notificacionesActivas": false,
    "ultimoAcceso": "2025-06-06 00:00:00",
    "multaBase": 17937
  },
  {
    "id": 8,
    "nombre": "Carlos Díaz Díaz",
    "telefono": "+593 928687443",
    "email": "carlos.díaz.díaz@aneupi.com",
    "codigo": "ANE-0008",
    "fechaIngreso": "2023-09-07",
    "direccion": "Av. 6 de Diciembre 624, Cuenca",
    "tipoAccionista": "Accionista Minoritario",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2025-04-02 00:00:00",
    "multaBase": 20773
  },
  {
    "id": 9,
    "nombre": "Sofía Vargas Salinas",
    "telefono": "+593 988607102",
    "email": "sofía.vargas.salinas@aneupi.com",
    "codigo": "ANE-0009",
    "fechaIngreso": "2018-12-04",
    "direccion": "Av. Insurgentes 865, Guayaquil",
    "tipoAccionista": "Inversionista",
    "estado": "Suspendido",
    "notificacionesActivas": true,
    "ultimoAcceso": "2019-12-22 00:00:00",
    "multaBase": 8839
  },
  {
    "id": 10,
    "nombre": "Sofía Gómez López",
    "telefono": "+593 971749481",
    "email": "sofía.gómez.lópez@aneupi.com",
    "codigo": "ANE-0010",
    "fechaIngreso": "2024-08-20",
    "direccion": "Av. República 758, Quito",
    "tipoAccionista": "Fundador",
    "estado": "Inactivo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2028-05-06 00:00:00",
    "multaBase": 2707
  },
  {
    "id": 11,
    "nombre": "Patricia Gómez López",
    "telefono": "+593 935722308",
    "email": "patricia.gómez.lópez@aneupi.com",
    "codigo": "ANE-0011",
    "fechaIngreso": "2020-12-13",
    "direccion": "Av. Colón 1613, Cuenca",
    "tipoAccionista": "Accionista Minoritario",
    "estado": "Activo",
    "notificacionesActivas": false,
    "ultimoAcceso": "2024-04-14 00:00:00",
    "multaBase": 1431
  },
  {
    "id": 12,
    "nombre": "Fernando Mendoza Sánchez",
    "telefono": "+593 911071383",
    "email": "fernando.mendoza.sánchez@aneupi.com",
    "codigo": "ANE-0012",
    "fechaIngreso": "2021-11-01",
    "direccion": "Av. República 1036, Guayaquil",
    "tipoAccionista": "Accionista Minoritario",
    "estado": "Suspendido",
    "notificacionesActivas": false,
    "ultimoAcceso": "2025-09-20 00:00:00",
    "multaBase": 6011
  },
  {
    "id": 13,
    "nombre": "Sofía García Díaz",
    "telefono": "+593 999883177",
    "email": "sofía.garcía.díaz@aneupi.com",
    "codigo": "ANE-0013",
    "fechaIngreso": "2021-08-25",
    "direccion": "Av. República 1642, Quito",
    "tipoAccionista": "Accionista Mayoritario",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2023-03-17 00:00:00",
    "multaBase": 8122
  },
  {
    "id": 14,
    "nombre": "Luis Sánchez Mendoza",
    "telefono": "+593 996986752",
    "email": "luis.sánchez.mendoza@aneupi.com",
    "codigo": "ANE-0014",
    "fechaIngreso": "2020-01-22",
    "direccion": "Av. Naciones Unidas 598, Monterrey",
    "tipoAccionista": "Fundador",
    "estado": "Suspendido",
    "notificacionesActivas": true,
    "ultimoAcceso": "2021-07-30 00:00:00",
    "multaBase": 3222
  },
  {
    "id": 15,
    "nombre": "Luis Martínez Salinas",
    "telefono": "+593 939262351",
    "email": "luis.martínez.salinas@aneupi.com",
    "codigo": "ANE-0015",
    "fechaIngreso": "2022-06-20",
    "direccion": "Av. 6 de Diciembre 1739, CDMX",
    "tipoAccionista": "Inversionista",
    "estado": "Inactivo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2024-01-09 00:00:00",
    "multaBase": 9046
  },
  {
    "id": 16,
    "nombre": "Ana Mendoza Gómez",
    "telefono": "+593 915306996",
    "email": "ana.mendoza.gómez@aneupi.com",
    "codigo": "ANE-0016",
    "fechaIngreso": "2018-07-19",
    "direccion": "Av. Colón 1119, Monterrey",
    "tipoAccionista": "Accionista Mayoritario",
    "estado": "Activo",
    "notificacionesActivas": true,
    "ultimoAcceso": "2020-03-06 00:00:00",
    "multaBase": 19129
  },
  {
    "id": 17,
    "nombre": "Daniela Sánchez Rodríguez",
    "telefono": "+593 913845771",
    "email": "daniela.sánchez.rodríguez@aneupi.com",
    "codigo": "ANE-0017",
    "fechaIngreso": "2024-01-15",
    "direccion": "Av. Amazonas 1964, Quito",
    "tipoAccionista": "Fundador",
    "estado": "Activo",
    "notificacionesActivas": false,
    "ultimoAcceso": "2027-09-17 00:00:00",
    "multaBase": 4336
  },
  {
    "id": 18,
    "nombre": "Carlos García Díaz",
    "telefono": "+593 916597268",
    "email": "carlos.garcía.díaz@aneupi.com",
    "codigo": "ANE-0018",
    "fechaIngreso": "2024-06-10",
    "direccion": "Av. República 1655, Quito",
    "tipoAccionista": "Accionista Mayoritario",
    "estado": "Inactivo",
    "notificacionesActivas": false,
    "ultimoAcceso": "2028-06-22 00:00:00",
    "multaBase": 19547
  },
  {
    "id": 19,
    "nombre": "Andrés Pérez Gómez",
    "telefono": "+593 977925060",
    "email": "andrés.pérez.gómez@aneupi.com",
    "codigo": "ANE-0019",
    "fechaIngreso": "2022-12-05",
    "direccion": "Av. República 240, Guayaquil",
    "tipoAccionista": "Inversionista",
    "estado": "Inactivo",
    "notificacionesActivas": false,
    "ultimoAcceso": "2026-06-10 00:00:00",
    "multaBase": 13030
  },
  {
    "id": 20,
    "nombre": "Paola Torres Sánchez",
    "telefono": "+593 937959436",
    "email": "paola.torres.sánchez@aneupi.com",
    "codigo": "ANE-0020",
    "fechaIngreso": "2020-04-10",
    "direccion": "Av. Insurgentes 568, Cuenca",
    "tipoAccionista": "Accionista Mayoritario",
    "estado": "Suspendido",
    "notificacionesActivas": false,
    "ultimoAcceso": "2022-08-24 00:00:00",
    "multaBase": 5647
  }
  
];

// Generar accionistas
export const generarAccionistas = () => {
  return accionistasReales;
};

// Generar multas por año
export const generarMultasPorAnio = (accionistas) => {
  const multas = {};
  
  accionistas.forEach((accionista, index) => {
    const multaBase = accionista.multaBase;
    
    anios.forEach((anio, anioIndex) => {
      if (!multas[anio]) multas[anio] = [];
      
      // Calcular multa con crecimiento progresivo desde 2023
      // 2023 es la base, cada año crece un 8%
      const factorCrecimiento = Math.pow(1.08, anioIndex);
      multas[anio][index] = Math.round(multaBase * 0.9 * factorCrecimiento);
    });
  });
  
  return multas;
};

// Generar pagos diarios
export const generarPagosDiarios = (accionistas) => {
  const pagos = [];
  
  // Función para generar número pseudo-aleatorio consistente basado en semilla
  const seededRandom = (seed) => {
    const x = Math.sin(seed) * 10000;
    return x - Math.floor(x);
  };
  
  let idCounter = 1;
  
  anios.forEach((anio, anioIndex) => {
    const mesesArray = [
      `Enero ${anio}`, `Febrero ${anio}`, `Marzo ${anio}`, `Abril ${anio}`, `Mayo ${anio}`, `Junio ${anio}`,
      `Julio ${anio}`, `Agosto ${anio}`, `Septiembre ${anio}`, `Octubre ${anio}`, `Noviembre ${anio}`, `Diciembre ${anio}`
    ];
    
    accionistas.forEach((accionista, index) => {
      const pagosPorAccionista = Math.max(3, Math.round(15 / 5)); // Fixed value instead of percentage
      const multaBase = accionista.multaBase;
      
      for (let i = 0; i < pagosPorAccionista; i++) {
        const seed = accionista.id * 10000 + anioIndex * 1000 + i;
        const mesIndex = Math.floor(seededRandom(seed) * 12);
        const mes = mesesArray[mesIndex];
        const dia = 1 + Math.floor(seededRandom(seed + 1) * 28);
        const monto = Math.round(multaBase * (0.1 + seededRandom(seed + 2) * 0.3));
        
        // Estado basado en semilla para consistencia - solo Completado o Pendiente
        const rand = seededRandom(seed + 3);
        const estado = rand < 0.75 ? "Completado" : "Pendiente";
        
        const metodos = ["Transferencia"];
        const descripciones = [
          "Retraso en asamblea general",
          "Falta en asamblea general",
          "Incumplimiento del reglamento",
          "No asistir a congreso",
          "Resoluciones"
        ];
        
        const observaciones = [
          "Asistencia tardía a reunión ordinaria de accionistas",
          "Falta de entrega de documentación en plazo establecido",
          "Incumplimiento de acuerdo de confidencialidad",
          "No presentación de informe trimestral requerido",
          "Retraso en pago de cuota de mantenimiento anual",
          "Uso indebido de recursos institucionales",
          "Inasistencia a 3 reuniones consecutivas del consejo",
          "Violación de política de conflictos de interés",
          "No cumplimiento de acuerdo de no competencia",
          "Divulgación de información privilegiada no autorizada"
        ];
        
        const metodo = metodos[Math.floor(seededRandom(seed + 4) * metodos.length)];
        const descripcion = descripciones[Math.floor(seededRandom(seed + 5) * descripciones.length)];
        const observacion = observaciones[Math.floor(seededRandom(seed + 6) * observaciones.length)];
        const hora = `${8 + Math.floor(seededRandom(seed + 7) * 9)}:${Math.floor(seededRandom(seed + 8) * 60).toString().padStart(2, '0')}`;
        
        // Generar abonos realizados para pagos pendientes
        const abonosRealizados = estado === "Pendiente" ? Math.round(monto * (0.1 + seededRandom(seed + 11) * 0.6)) : 0;
        
        // Generar fecha de ingreso de multa (algunos días antes de la fecha de pago)
        const diasAntes = 1 + Math.floor(seededRandom(seed + 10) * 15); // Entre 1 y 15 días antes
        const fechaIngresoMulta = new Date(`${anio}-${mesIndex + 1}-${dia}`);
        fechaIngresoMulta.setDate(fechaIngresoMulta.getDate() - diasAntes);
        const fechaIngresoMultaStr = fechaIngresoMulta.toISOString().split('T')[0];
        
        pagos.push({
          id: idCounter++,
          referencia: `PAG-ANE-${anio}-${(mesIndex + 1).toString().padStart(2, '0')}-${dia.toString().padStart(2, '0')}-${index.toString().padStart(2, '0')}${i.toString().padStart(2, '0')}`,
          accionista: accionista.nombre,
          accionistaId: accionista.id,
          mes,
          dia,
          monto,
          abonosRealizados,
          fechaIngresoMulta: fechaIngresoMultaStr,
          fechaPago: estado === "Completado" ? `${anio}-${(mesIndex + 1).toString().padStart(2, '0')}-${dia.toString().padStart(2, '0')}` : null,
          horaPago: hora,
          estado: estado,
          metodo,
          descripcion,
          observacion,
          comprobante: `COMP-ANE-${idCounter.toString().padStart(6, '0')}`,
          canal: ["Web ANEUPI", "App ANEUPI", "Sucursal ANEUPI", "Telefónico ANEUPI"][Math.floor(seededRandom(seed + 9) * 4)],
          email: accionista.email,
          telefono: accionista.telefono,
          fechaRegistro: new Date(`${anio}-${mesIndex + 1}-${dia}`).toISOString().split('T')[0],
          usuarioRegistro: "Sistema ANEUPI"
        });
      }
    });
  });
  
  pagos.sort((a, b) => {
    const fechaA = a.fechaPago ? new Date(a.fechaPago) : new Date(0);
    const fechaB = b.fechaPago ? new Date(b.fechaPago) : new Date(0);
    return fechaB - fechaA;
  });
  
  return pagos;
};

// Generar resumen mensual
export const generarResumenMensual = (pagos) => {
  const mesesArray = [
    "Enero 2024", "Febrero 2024", "Marzo 2024", "Abril 2024", "Mayo 2024", "Junio 2024",
    "Julio 2024", "Agosto 2024", "Septiembre 2024", "Octubre 2024", "Noviembre 2024", "Diciembre 2024"
  ];
  
  const resumen = {};
  
  mesesArray.forEach(mes => {
    const pagosMes = pagos.filter(pago => pago.mes === mes);
    const completados = pagosMes.filter(p => p.estado === "Completado").length;
    const pendientes = pagosMes.filter(p => p.estado === "Pendiente").length;
    const total = pagosMes.reduce((sum, p) => sum + p.monto, 0);
    const totalPagos = completados + pendientes;
    
    resumen[mes] = {
      total,
      completados,
      pendientes,
      rechazados: 0,
      proceso: 0,
      promedio: totalPagos > 0 ? Math.round(total / totalPagos) : 0
    };
  });
  
  return resumen;
};

// Generar abonos para una multa
export const generarAbonosParaMulta = (multa) => {
  if (multa.estado !== "Pendiente" || multa.abonosRealizados === 0) {
    return [];
  }

  const seededRandom = (seed) => {
    const x = Math.sin(seed) * 10000;
    return x - Math.floor(x);
  };

  const abonos = [];
  const totalAbonos = multa.abonosRealizados;
  const numAbonos = 1 + Math.floor(seededRandom(multa.id * 100) * 3); // Entre 1 y 3 abonos
  
  let montoRestante = totalAbonos;
  const fechaIngresoMulta = new Date(multa.fechaIngresoMulta);
  
  for (let i = 0; i < numAbonos; i++) {
    const esUltimoAbono = i === numAbonos - 1;
    const montoAbono = esUltimoAbono ? montoRestante : Math.round(montoRestante * (0.3 + seededRandom(multa.id * 100 + i) * 0.4));
    
    // Generar fecha de abono (después de la fecha de ingreso de multa)
    const diasDespues = 5 + Math.floor(seededRandom(multa.id * 100 + i + 50) * (i + 1) * 10);
    const fechaAbono = new Date(fechaIngresoMulta);
    fechaAbono.setDate(fechaAbono.getDate() + diasDespues);
    
    abonos.push({
      fecha: fechaAbono.toISOString().split('T')[0],
      monto: montoAbono,
      referencia: `ABONO-${multa.comprobante}-${(i + 1).toString().padStart(2, '0')}`
    });
    
    montoRestante -= montoAbono;
  }
  
  // Ordenar abonos por fecha
  abonos.sort((a, b) => new Date(a.fecha) - new Date(b.fecha));
  
  return abonos;
};

// Generar notificaciones
export const generarNotificaciones = () => {
  return [
    {
      id: 1,
      tipo: "pago_pendiente",
      titulo: "Pago Pendiente Urgente",
      mensaje: "Carlos Rodríguez tiene 1 pago pendiente de $3,500 por retraso en asamblea",
      fecha: "2024-12-15 09:30:00",
      leida: false,
      accion: "/pagos",
      prioridad: "alta"
    },
    {
      id: 2,
      tipo: "recordatorio",
      titulo: "Recordatorio de Reunión Trimestral",
      mensaje: "Reunión de accionistas el próximo lunes 20 de diciembre a las 10:00 AM",
      fecha: "2024-12-14 14:20:00",
      leida: true,
      accion: "/calendario",
      prioridad: "media"
    },
    {
      id: 3,
      tipo: "alerta",
      titulo: "Alerta de Pago Rechazado",
      mensaje: "Se detectó 1 pago rechazado de Patricia Ramírez por $2,800",
      fecha: "2024-12-15 11:45:00",
      leida: false,
      accion: "/alertas",
      prioridad: "alta"
    },
    {
      id: 4,
      tipo: "informacion",
      titulo: "Actualización del Portal ANEUPI",
      mensaje: "Nuevas funcionalidades disponibles: reportes automáticos y estadísticas avanzadas",
      fecha: "2024-12-13 16:30:00",
      leida: true,
      accion: "/ayuda",
      prioridad: "baja"
    },
    {
      id: 5,
      tipo: "recordatorio",
      titulo: "Vencimiento de Multas",
      mensaje: "3 accionistas tienen multas próximas a vencer esta semana",
      fecha: "2024-12-12 10:15:00",
      leida: false,
      accion: "/vencimientos",
      prioridad: "media"
    }
  ];
}